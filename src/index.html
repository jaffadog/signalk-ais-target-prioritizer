<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>SignalK AIS Target Prioritizer</title>
    <link rel="stylesheet" href="assets/styles/styles.scss" />
    <script type="module" src="assets/scripts/main.js"></script>
  </head>

  <body>
    <div id="map"></div>

    <div class="container">
      <div
        id="targetCounts"
        class="text-center user-select-none pe-none"
        tabindex="-1"
      >
        <p class="display-3 text-info mb-0" id="totalTargetCountUI">0</p>
        <p class="text-secondary small">TARGETS</p>
        <p class="display-3 text-primary mb-0" id="filteredTargetCountUI">0</p>
        <p class="text-secondary small">FILTERED</p>
        <p class="display-3 text-danger mb-0" id="alarmTargetCountUI">0</p>
        <p class="text-secondary small">ALARMS</p>
      </div>

      <!-- ERROR MODAL -->
      <div class="modal" tabindex="-1" id="modalAlert">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="alert alert-danger mb-0" role="alert">
              <div class="alert-dismissible">
                <span class="h4 alert-heading">
                  <i class="bi bi-exclamation-triangle-fill"></i>
                  Error</span
                >
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <hr />
              <p class="mb-0" id="errorMessage"></p>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" tabindex="-1" id="modalAlarm">
        <div class="modal-dialog modal-dialog-centered">
          <div
            class="modal-content bg-danger-subtle text-danger-emphasis border-danger-subtle"
          >
            <div class="modal-header border-danger-subtle">
              <h5 class="modal-title">
                <i class="bi bi-exclamation-triangle-fill"></i>
                Alarm
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>

            <div class="modal-body" id="alarmDiv"></div>

            <div class="modal-footer border-danger-subtle">
              <button
                type="button"
                class="btn btn-outline-danger"
                data-bs-dismiss="modal"
                id="buttonMuteAllAlarms"
              >
                Mute All Alarms
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" tabindex="-1" id="modalClosebyBoats">
        <div class="modal-dialog modal-dialog-centered modal-sm">
          <div class="modal-content">
            <div class="list-group" id="listOfClosebyBoats"></div>
          </div>
        </div>
      </div>

      <div class="modal" tabindex="-1" id="modalSelectedVesselProperties">
        <div class="modal-dialog modal-dialog-centered modal-sm">
          <div class="modal-content">
            <div class="modal-header">
              <div class="col-2">
                <button
                  type="button"
                  class="btn btn-outline-secondary"
                  id="buttonMuteToggle"
                >
                  <i class="bi bi-volume-mute-fill"></i>
                </button>
              </div>
              <div class="col">
                <h5 class="modal-title text-center" id="target.name"></h5>
              </div>
              <div class="col-2 text-end">
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                ></button>
              </div>
            </div>
            <div class="modal-body">
              <div id="alertPlaceholder"></div>
              <h6
                class="alert alert-warning text-center d-none"
                role="alert"
                id="selectedVesselAlert"
              ></h6>
              <table class="table table-sm">
                <tbody>
                  <tr>
                    <th scope="row">Last Seen</th>
                    <td><span id="target.lastSeen"></span> secs</td>
                  </tr>
                  <tr>
                    <th scope="row">CPA</th>
                    <td><span id="target.cpaFormatted"></span></td>
                  </tr>
                  <tr>
                    <th scope="row">TCPA</th>
                    <td id="target.tcpaFormatted"></td>
                  </tr>
                  <tr>
                    <th scope="row">Range</th>
                    <td><span id="target.rangeFormatted"></span></td>
                  </tr>
                  <tr>
                    <th scope="row">Bearing</th>
                    <td><span id="target.bearingFormatted"></span></td>
                  </tr>
                  <tr>
                    <th scope="row">SOG</th>
                    <td><span id="target.sogFormatted"></span></td>
                  </tr>
                  <tr>
                    <th scope="row">COG</th>
                    <td><span id="target.cogFormatted"></span></td>
                  </tr>
                  <tr>
                    <th scope="row">HDG</th>
                    <td><span id="target.hdgFormatted"></span></td>
                  </tr>
                  <!-- ${target.aisClass == 'A' ? ` -->
                  <tr class="ais-class-a d-none">
                    <th scope="row">Rate of Turn</th>
                    <td><span id="target.rotFormatted"></span> deg/s</td>
                  </tr>

                  <tr>
                    <th scope="row">Callsign</th>
                    <td id="target.callsign"></td>
                  </tr>
                  <tr>
                    <th scope="row">MMSI</th>
                    <td>
                      <span id="target.mmsi"></span> (<a
                        href="#"
                        data-bs-toggle="tooltip"
                        data-bs-placement="right"
                        data-bs-title=""
                        id="target.mmsiCountryCode"
                      ></a
                      >)
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">Type</th>
                    <td id="target.type"></td>
                  </tr>
                  <tr>
                    <th scope="row">Class</th>
                    <td id="target.aisClassFormatted"></td>
                  </tr>
                  <tr class="ais-class-a d-none">
                    <th scope="row">Status</th>
                    <td id="target.status"></td>
                  </tr>

                  <tr>
                    <th scope="row">Size</th>
                    <td id="target.sizeFormatted"></td>
                  </tr>
                  <tr class="ais-class-a d-none">
                    <th scope="row">Draft</th>
                    <td id="target.draft"></td>
                  </tr>
                  <tr class="ais-class-a d-none">
                    <th scope="row">Destination</th>
                    <td id="target.destination"></td>
                  </tr>
                  <tr class="ais-class-a d-none">
                    <th scope="row">ETA</th>
                    <td id="target.eta"></td>
                  </tr>
                  <tr class="ais-class-a d-none">
                    <th scope="row">IMO</th>
                    <td id="target.imoFormatted"></td>
                  </tr>
                  <tr>
                    <th scope="row">Lat</th>
                    <td id="target.latitudeFormatted"></td>
                  </tr>
                  <tr>
                    <th scope="row">Lon</th>
                    <td id="target.longitudeFormatted"></td>
                  </tr>
                  <!--navigation.specialManeuver-->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div
        class="offcanvas offcanvas-start"
        tabindex="-1"
        id="offcanvasTargetInfo"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title">Target Info</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
          ></button>
        </div>
        <div class="offcanvas-body" id="offcanvasTargetInfoBody"></div>
      </div>

      <div
        class="offcanvas offcanvas-start"
        tabindex="-1"
        id="offcanvasTargetList"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title">
            AIS Targets (<span id="numberOfAisTargets"></span>)
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
          ></button>
        </div>
        <div class="offcanvas-body">
          <div class="mb-3">
            <label for="selectTableSort" class="form-label">Sort By</label>
            <select class="form-select fw-bold" id="selectTableSort">
              <option value="priority">Priority</option>
              <option value="tcpa">TCPA</option>
              <option value="cpa">CPA</option>
              <option value="range">Range</option>
              <option value="name">Name</option>
            </select>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th scope="col" class="" colspan="2">NAME</th>
                <th scope="col" class="text-end col-1">BRG</th>
                <th scope="col" class="text-end col-2">RNG</th>
                <th scope="col" class="text-end col-2">SOG</th>
                <th scope="col" class="text-end col-2">CPA</th>
                <th scope="col" class="text-end col-2">TCPA</th>
                <!-- <th scope="col" class="text-end">ORDER</th> -->
              </tr>
            </thead>
            <tbody id="tableOfTargetsBody" />
          </table>
        </div>
      </div>

      <div
        class="offcanvas offcanvas-start"
        tabindex="-1"
        id="offcanvasSettings"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title">Settings</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
          ></button>
        </div>
        <div class="offcanvas-body">
          <div class="collapse multi-collapse show" id="collapseSettings">
            <div class="card card-body">
              <form>
                <div class="mb-3">
                  <label for="selectActiveProfile" class="form-label"
                    >Active Profile</label
                  >
                  <select class="form-select fw-bold" id="selectActiveProfile">
                    <option value="anchor">Anchored</option>
                    <option value="harbor">Harbor</option>
                    <option value="coastal">Coastal</option>
                    <option value="offshore">Offshore</option>
                  </select>
                </div>
                <button
                  type="button"
                  class="btn btn-primary col-12 mb-3"
                  id="buttonEditProfiles"
                >
                  Edit Profiles
                </button>
                <button
                  type="button"
                  class="btn btn-danger col-12 mb-3"
                  id="buttonMuteAllAlarms2"
                >
                  Mute All Alarms
                </button>
                <div class="form-check mb-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="checkNoSleep"
                  />
                  <label class="form-check-label" for="checkNoSleep">
                    Prevent screen sleeping in iOS and Android
                  </label>
                </div>
                <div class="form-check mb-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="checkDarkMode"
                  />
                  <label class="form-check-label" for="checkDarkMode">
                    Dark Mode
                  </label>
                </div>
                <div class="form-check mb-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="checkFullScreen"
                  />
                  <label class="form-check-label" for="checkFullScreen">
                    Fullscreen Mode
                  </label>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div
        class="offcanvas offcanvas-start"
        tabindex="-1"
        id="offcanvasEditProfiles"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title">Edit Profiles</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
          ></button>
        </div>
        <div class="offcanvas-body">
          <label for="selectProfileToEdit" class="form-label"
            >Select profile to edit</label
          >
          <div class="row mb-3">
            <div class="col-6">
              <select class="form-select fw-bold" id="selectProfileToEdit">
                <option value="anchor" selected>Anchored</option>
                <option value="harbor">Harbor</option>
                <option value="coastal">Coastal</option>
                <option value="offshore">Offshore</option>
              </select>
            </div>
            <div class="col-6 d-grid">
              <button
                type="button"
                class="btn btn-warning"
                id="buttonRestoreDefaults"
              >
                Restore Defaults
              </button>
            </div>
          </div>

          <div class="card mb-3">
            <ul class="list-group list-group-flush">
              <!--collision warning-->
              <li class="h5 bg-body-secondary list-group-item">
                Collision Warning
              </li>

              <li class="list-group-item">
                <p class="card-text">
                  Targets that meet all three of the conditions below will be
                  set to a <code>warning</code> state and shown in
                  <code>orange</code> in the plotter.
                </p>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configWarningCpaRange" class="form-label"
                      >CPA Less Than</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configWarningCpaRange"
                      min="0"
                      max="19"
                      step="1"
                      data-target="configWarningCpa"
                      data-alarm-type="warning"
                      data-alarm-criteria="cpa"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configWarningCpa" class="fw-bold">2.0</span
                    ><span id="configWarningCpaUnits"> NM</span>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configWarningTcpaRange" class="form-label"
                      >TCPA Less Than</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configWarningTcpaRange"
                      min="1"
                      max="12"
                      step="1"
                      data-target="configWarningTcpa"
                      data-alarm-type="warning"
                      data-alarm-criteria="tcpa"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configWarningTcpa" class="fw-bold">10</span
                    ><span> Min</span>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configWarningSogRange" class="form-label"
                      >Speed Exceeds</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configWarningSogRange"
                      min="0"
                      max="10"
                      step="1"
                      data-target="configWarningSog"
                      data-alarm-type="warning"
                      data-alarm-criteria="speed"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configWarningSog" class="fw-bold">2.0</span
                    ><span> Knots</span>
                  </div>
                </div>
              </li>
              <!--end collision warning-->

              <!--collision alarm-->
              <li class="h5 bg-body-secondary list-group-item">
                Collision Alarm
              </li>

              <li class="list-group-item">
                <p class="card-text">
                  Targets that meet all three of the conditions below will be
                  set to a <code>danger</code> state and shown in
                  <code>red</code> in the plotter.
                </p>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configAlarmCpaRange" class="form-label"
                      >CPA Less Than</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configAlarmCpaRange"
                      min="0"
                      max="19"
                      step="1"
                      data-target="configAlarmCpa"
                      data-alarm-type="danger"
                      data-alarm-criteria="cpa"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configAlarmCpa" class="fw-bold">2.0</span
                    ><span id="configAlarmCpaUnits"> NM</span>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configAlarmTcpaRange" class="form-label"
                      >TCPA Less Than</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configAlarmTcpaRange"
                      min="1"
                      max="12"
                      step="1"
                      data-target="configAlarmTcpa"
                      data-alarm-type="danger"
                      data-alarm-criteria="tcpa"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configAlarmTcpa" class="fw-bold">10</span
                    ><span> Min</span>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configAlarmSogRange" class="form-label"
                      >Speed Exceeds</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configAlarmSogRange"
                      min="0"
                      max="10"
                      step="1"
                      data-target="configAlarmSog"
                      data-alarm-type="danger"
                      data-alarm-criteria="speed"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configAlarmSog" class="fw-bold">2.0</span
                    ><span> Knots</span>
                  </div>
                </div>
              </li>
              <!--end collision alarm-->

              <!--guard alarm-->
              <li class="h5 bg-body-secondary list-group-item">Guard Alarm</li>

              <li class="list-group-item">
                <p class="card-text">
                  Targets that meet both of the conditions below will be set to
                  a <code>danger</code> state and shown in <code>red</code> in
                  the plotter.
                </p>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configGuardRangeRange" class="form-label"
                      >Range Within</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configGuardRangeRange"
                      min="0"
                      max="19"
                      step="1"
                      data-target="configGuardRange"
                      data-alarm-type="guard"
                      data-alarm-criteria="range"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configGuardRange" class="fw-bold">2.0</span
                    ><span id="configGuardRangeUnits"> NM</span>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-3 pe-0">
                    <label for="configGuardSogRange" class="form-label"
                      >Speed Exceeds</label
                    >
                  </div>
                  <div class="col-7">
                    <input
                      type="range"
                      class="form-range"
                      id="configGuardSogRange"
                      min="0"
                      max="10"
                      step="1"
                      data-target="configGuardSog"
                      data-alarm-type="guard"
                      data-alarm-criteria="speed"
                    />
                  </div>
                  <div class="col-2 text-end">
                    <span id="configGuardSog" class="fw-bold">2.0</span
                    ><span> Knots</span>
                  </div>
                </div>
              </li>
              <!--end guard alarm-->
            </ul>
          </div>
          <!--end card-->
        </div>
        <!--end offcanvas-body-->
      </div>
      <!--end offcanvasProfile-->
    </div>
    <!--end container-->
  </body>
</html>
